services:
  domainac:
    build: .
    image: domainac:latest
    container_name: domainac
    working_dir: /app
    environment:
      - PORT=18080
    ports:
      - "18080:18080"
    restart: unless-stopped

  domainac-mcp:
    build: .
    image: domainac:latest
    container_name: domainac-mcp
    working_dir: /app
    command: ["python", "/app/app/run_mcp_server.py"]
    environment:
      - MCP_TRANSPORT=streamable-http
      - MCP_HOST=0.0.0.0
      - MCP_PORT=18081
      - MCP_STREAMABLE_HTTP_PATH=/mcp
    ports:
      - "18081:18081"
    restart: unless-stopped
